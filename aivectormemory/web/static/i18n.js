const LANGS = {
  'zh-CN': { label: 'ç®€ä½“ä¸­æ–‡', flag: 'ðŸ‡¨ðŸ‡³' },
  'zh-TW': { label: 'ç¹é«”ä¸­æ–‡', flag: 'ðŸ‡¹ðŸ‡¼' },
  'en':    { label: 'English',  flag: 'ðŸ‡ºðŸ‡¸' },
  'es':    { label: 'EspaÃ±ol',  flag: 'ðŸ‡ªðŸ‡¸' },
  'de':    { label: 'Deutsch',  flag: 'ðŸ‡©ðŸ‡ª' },
  'fr':    { label: 'FranÃ§ais', flag: 'ðŸ‡«ðŸ‡·' },
  'ja':    { label: 'æ—¥æœ¬èªž',   flag: 'ðŸ‡¯ðŸ‡µ' },
};

const messages = {
  'zh-CN': {
    selectProject: 'é€‰æ‹©é¡¹ç›®',
    stats: 'ç»Ÿè®¡æ¦‚è§ˆ',
    projectMemories: 'é¡¹ç›®è®°å¿†',
    globalMemories: 'å…¨å±€è®°å¿†',
    sessionStatus: 'ä¼šè¯çŠ¶æ€',
    tagManagement: 'æ ‡ç­¾ç®¡ç†',
    issueTracking: 'é—®é¢˜è·Ÿè¸ª',
    searchProject: 'æœç´¢é¡¹ç›®è®°å¿†...',
    searchGlobal: 'æœç´¢å…¨å±€è®°å¿†...',
    searchTag: 'æœç´¢æ ‡ç­¾...',
    status: { pending: 'å¾…å¤„ç†', in_progress: 'è¿›è¡Œä¸­', completed: 'å·²å®Œæˆ', archived: 'å·²å½’æ¡£' },
    allStatus: 'å…¨éƒ¨çŠ¶æ€',
    memories: 'è®°å¿†',
    issues: 'é—®é¢˜',
    tags: 'æ ‡ç­¾',
    total: 'å…±',
    items: 'æ¡',
    page: 'é¡µ',
    noMemories: 'æš‚æ— è®°å¿†',
    noStatus: 'æš‚æ— ä¼šè¯çŠ¶æ€',
    noIssues: 'æš‚æ— é—®é¢˜',
    noTags: 'æš‚æ— æ ‡ç­¾',
    edit: 'ç¼–è¾‘',
    delete: 'åˆ é™¤',
    rename: 'é‡å‘½å',
    view: 'æŸ¥çœ‹',
    save: 'ä¿å­˜',
    cancel: 'å–æ¶ˆ',
    confirm: 'ç¡®è®¤',
    confirmDelete: 'ç¡®è®¤åˆ é™¤ï¼Ÿ',
    editMemory: 'ç¼–è¾‘è®°å¿†',
    content: 'å†…å®¹',
    tagsCommaSep: 'æ ‡ç­¾ï¼ˆé€—å·åˆ†éš”ï¼‰',
    renameTag: 'é‡å‘½åæ ‡ç­¾',
    currentName: 'å½“å‰åç§°',
    newName: 'æ–°åç§°',
    mergeTags: 'åˆå¹¶æ ‡ç­¾',
    mergeFollowing: 'å°†ä»¥ä¸‹æ ‡ç­¾åˆå¹¶',
    mergeInto: 'åˆå¹¶ä¸º',
    confirmDeleteTag: 'ç¡®è®¤åˆ é™¤æ ‡ç­¾ï¼š{names}ï¼Ÿ\næ ‡ç­¾å°†ä»Žæ‰€æœ‰å…³è”è®°å¿†ä¸­ç§»é™¤ã€‚',
    selected: 'å·²é€‰',
    tagsUnit: 'ä¸ªæ ‡ç­¾',
    batchMerge: 'åˆå¹¶ä¸º...',
    batchDelete: 'æ‰¹é‡åˆ é™¤',
    cancelSelect: 'å–æ¶ˆé€‰æ‹©',
    tagName: 'æ ‡ç­¾å',
    memoryCount: 'è®°å¿†æ•°',
    actions: 'æ“ä½œ',
    blocked: 'é˜»å¡žçŠ¶æ€',
    currentTask: 'å½“å‰ä»»åŠ¡',
    nextStep: 'ä¸‹ä¸€æ­¥',
    updateTime: 'æ›´æ–°æ—¶é—´',
    progress: 'è¿›åº¦',
    recentChanges: 'æœ€è¿‘ä¿®æ”¹',
    pending: 'å¾…å¤„ç†',
    yes: 'æ˜¯',
    no: 'æ— ',
    clickExpand: 'ç‚¹å‡»å±•å¼€è¯¦æƒ…',
    archivedAt: 'å½’æ¡£äºŽ',
    createdAt: 'åˆ›å»ºäºŽ',
    vectorNetwork: 'è®°å¿†å‘é‡ç½‘ç»œ',
    vectorSub: 'è¯­ä¹‰å…³è” Â· 3D æ‹“æ‰‘ Â· é¼ æ ‡æ—‹è½¬ Â· {n} èŠ‚ç‚¹',
    showMore: 'æŸ¥çœ‹æ›´å¤š',
    allTags: 'å…¨éƒ¨æ ‡ç­¾ï¼ˆ{n}ï¼‰',
    tagLabel: 'æ ‡ç­¾ï¼š{name}',
    issueList: 'é—®é¢˜åˆ—è¡¨',
    projects: 'ä¸ªé¡¹ç›®',
    footer: '~/.aivectormemory/memory.db Â· {n} ä¸ªé¡¹ç›®',
  },
  'zh-TW': {
    selectProject: 'é¸æ“‡å°ˆæ¡ˆ',
    stats: 'çµ±è¨ˆæ¦‚è¦½',
    projectMemories: 'å°ˆæ¡ˆè¨˜æ†¶',
    globalMemories: 'å…¨åŸŸè¨˜æ†¶',
    sessionStatus: 'æœƒè©±ç‹€æ…‹',
    tagManagement: 'æ¨™ç±¤ç®¡ç†',
    issueTracking: 'å•é¡Œè¿½è¹¤',
    searchProject: 'æœå°‹å°ˆæ¡ˆè¨˜æ†¶...',
    searchGlobal: 'æœå°‹å…¨åŸŸè¨˜æ†¶...',
    searchTag: 'æœå°‹æ¨™ç±¤...',
    status: { pending: 'å¾…è™•ç†', in_progress: 'é€²è¡Œä¸­', completed: 'å·²å®Œæˆ', archived: 'å·²æ­¸æª”' },
    allStatus: 'å…¨éƒ¨ç‹€æ…‹',
    memories: 'è¨˜æ†¶',
    issues: 'å•é¡Œ',
    tags: 'æ¨™ç±¤',
    total: 'å…±',
    items: 'æ¢',
    page: 'é ',
    noMemories: 'æš«ç„¡è¨˜æ†¶',
    noStatus: 'æš«ç„¡æœƒè©±ç‹€æ…‹',
    noIssues: 'æš«ç„¡å•é¡Œ',
    noTags: 'æš«ç„¡æ¨™ç±¤',
    edit: 'ç·¨è¼¯',
    delete: 'åˆªé™¤',
    rename: 'é‡æ–°å‘½å',
    view: 'æŸ¥çœ‹',
    save: 'å„²å­˜',
    cancel: 'å–æ¶ˆ',
    confirm: 'ç¢ºèª',
    confirmDelete: 'ç¢ºèªåˆªé™¤ï¼Ÿ',
    editMemory: 'ç·¨è¼¯è¨˜æ†¶',
    content: 'å…§å®¹',
    tagsCommaSep: 'æ¨™ç±¤ï¼ˆé€—è™Ÿåˆ†éš”ï¼‰',
    renameTag: 'é‡æ–°å‘½åæ¨™ç±¤',
    currentName: 'ç›®å‰åç¨±',
    newName: 'æ–°åç¨±',
    mergeTags: 'åˆä½µæ¨™ç±¤',
    mergeFollowing: 'å°‡ä»¥ä¸‹æ¨™ç±¤åˆä½µ',
    mergeInto: 'åˆä½µç‚º',
    confirmDeleteTag: 'ç¢ºèªåˆªé™¤æ¨™ç±¤ï¼š{names}ï¼Ÿ\næ¨™ç±¤å°‡å¾žæ‰€æœ‰é—œè¯è¨˜æ†¶ä¸­ç§»é™¤ã€‚',
    selected: 'å·²é¸',
    tagsUnit: 'å€‹æ¨™ç±¤',
    batchMerge: 'åˆä½µç‚º...',
    batchDelete: 'æ‰¹æ¬¡åˆªé™¤',
    cancelSelect: 'å–æ¶ˆé¸æ“‡',
    tagName: 'æ¨™ç±¤å',
    memoryCount: 'è¨˜æ†¶æ•¸',
    actions: 'æ“ä½œ',
    blocked: 'é˜»å¡žç‹€æ…‹',
    currentTask: 'ç›®å‰ä»»å‹™',
    nextStep: 'ä¸‹ä¸€æ­¥',
    updateTime: 'æ›´æ–°æ™‚é–“',
    progress: 'é€²åº¦',
    recentChanges: 'æœ€è¿‘ä¿®æ”¹',
    pending: 'å¾…è™•ç†',
    yes: 'æ˜¯',
    no: 'ç„¡',
    clickExpand: 'é»žæ“Šå±•é–‹è©³æƒ…',
    archivedAt: 'æ­¸æª”æ–¼',
    createdAt: 'å»ºç«‹æ–¼',
    vectorNetwork: 'è¨˜æ†¶å‘é‡ç¶²è·¯',
    vectorSub: 'èªžç¾©é—œè¯ Â· 3D æ‹“æ’² Â· æ»‘é¼ æ—‹è½‰ Â· {n} ç¯€é»ž',
    showMore: 'æŸ¥çœ‹æ›´å¤š',
    allTags: 'å…¨éƒ¨æ¨™ç±¤ï¼ˆ{n}ï¼‰',
    tagLabel: 'æ¨™ç±¤ï¼š{name}',
    issueList: 'å•é¡Œåˆ—è¡¨',
    projects: 'å€‹å°ˆæ¡ˆ',
    footer: '~/.aivectormemory/memory.db Â· {n} å€‹å°ˆæ¡ˆ',
  },
  'en': {
    selectProject: 'Select Project',
    stats: 'Overview',
    projectMemories: 'Project Memories',
    globalMemories: 'Global Memories',
    sessionStatus: 'Session Status',
    tagManagement: 'Tags',
    issueTracking: 'Issues',
    searchProject: 'Search project memories...',
    searchGlobal: 'Search global memories...',
    searchTag: 'Search tags...',
    status: { pending: 'Pending', in_progress: 'In Progress', completed: 'Completed', archived: 'Archived' },
    allStatus: 'All Status',
    memories: 'Memories',
    issues: 'Issues',
    tags: 'Tags',
    total: 'Total',
    items: 'items',
    page: 'page',
    noMemories: 'No memories yet',
    noStatus: 'No session status',
    noIssues: 'No issues yet',
    noTags: 'No tags yet',
    edit: 'Edit',
    delete: 'Delete',
    rename: 'Rename',
    view: 'View',
    save: 'Save',
    cancel: 'Cancel',
    confirm: 'Confirm',
    confirmDelete: 'Confirm delete?',
    editMemory: 'Edit Memory',
    content: 'Content',
    tagsCommaSep: 'Tags (comma separated)',
    renameTag: 'Rename Tag',
    currentName: 'Current Name',
    newName: 'New Name',
    mergeTags: 'Merge Tags',
    mergeFollowing: 'Merge the following tags',
    mergeInto: 'Merge into',
    confirmDeleteTag: 'Delete tags: {names}?\nTags will be removed from all associated memories.',
    selected: 'Selected',
    tagsUnit: 'tags',
    batchMerge: 'Merge into...',
    batchDelete: 'Batch Delete',
    cancelSelect: 'Deselect',
    tagName: 'Tag Name',
    memoryCount: 'Count',
    actions: 'Actions',
    blocked: 'Blocked',
    currentTask: 'Current Task',
    nextStep: 'Next Step',
    updateTime: 'Updated',
    progress: 'Progress',
    recentChanges: 'Recent Changes',
    pending: 'Pending',
    yes: 'Yes',
    no: 'None',
    clickExpand: 'Click to expand',
    archivedAt: 'Archived at',
    createdAt: 'Created at',
    vectorNetwork: 'Memory Vector Network',
    vectorSub: 'Semantic Â· 3D Topology Â· Mouse Rotate Â· {n} nodes',
    showMore: 'Show More',
    allTags: 'All Tags ({n})',
    tagLabel: 'Tag: {name}',
    issueList: 'Issue List',
    projects: 'projects',
    footer: '~/.aivectormemory/memory.db Â· {n} projects',
  },
  'es': {
    selectProject: 'Seleccionar Proyecto',
    stats: 'Resumen',
    projectMemories: 'Memorias del Proyecto',
    globalMemories: 'Memorias Globales',
    sessionStatus: 'Estado de SesiÃ³n',
    tagManagement: 'Etiquetas',
    issueTracking: 'Problemas',
    searchProject: 'Buscar memorias del proyecto...',
    searchGlobal: 'Buscar memorias globales...',
    searchTag: 'Buscar etiquetas...',
    status: { pending: 'Pendiente', in_progress: 'En Progreso', completed: 'Completado', archived: 'Archivado' },
    allStatus: 'Todos los Estados',
    memories: 'Memorias',
    issues: 'Problemas',
    tags: 'Etiquetas',
    total: 'Total',
    items: 'elementos',
    page: 'pÃ¡gina',
    noMemories: 'Sin memorias',
    noStatus: 'Sin estado de sesiÃ³n',
    noIssues: 'Sin problemas',
    noTags: 'Sin etiquetas',
    edit: 'Editar',
    delete: 'Eliminar',
    rename: 'Renombrar',
    view: 'Ver',
    save: 'Guardar',
    cancel: 'Cancelar',
    confirm: 'Confirmar',
    confirmDelete: 'Â¿Confirmar eliminaciÃ³n?',
    editMemory: 'Editar Memoria',
    content: 'Contenido',
    tagsCommaSep: 'Etiquetas (separadas por comas)',
    renameTag: 'Renombrar Etiqueta',
    currentName: 'Nombre Actual',
    newName: 'Nuevo Nombre',
    mergeTags: 'Fusionar Etiquetas',
    mergeFollowing: 'Fusionar las siguientes etiquetas',
    mergeInto: 'Fusionar en',
    confirmDeleteTag: 'Â¿Eliminar etiquetas: {names}?\nSe eliminarÃ¡n de todas las memorias asociadas.',
    selected: 'Seleccionados',
    tagsUnit: 'etiquetas',
    batchMerge: 'Fusionar en...',
    batchDelete: 'Eliminar Lote',
    cancelSelect: 'Deseleccionar',
    tagName: 'Nombre',
    memoryCount: 'Cantidad',
    actions: 'Acciones',
    blocked: 'Bloqueado',
    currentTask: 'Tarea Actual',
    nextStep: 'Siguiente Paso',
    updateTime: 'Actualizado',
    progress: 'Progreso',
    recentChanges: 'Cambios Recientes',
    pending: 'Pendiente',
    yes: 'SÃ­',
    no: 'Ninguno',
    clickExpand: 'Clic para expandir',
    archivedAt: 'Archivado el',
    createdAt: 'Creado el',
    vectorNetwork: 'Red de Vectores de Memoria',
    vectorSub: 'SemÃ¡ntica Â· TopologÃ­a 3D Â· Rotar con ratÃ³n Â· {n} nodos',
    showMore: 'Ver MÃ¡s',
    allTags: 'Todas las Etiquetas ({n})',
    tagLabel: 'Etiqueta: {name}',
    issueList: 'Lista de Problemas',
    projects: 'proyectos',
    footer: '~/.aivectormemory/memory.db Â· {n} proyectos',
  },
  'de': {
    selectProject: 'Projekt AuswÃ¤hlen',
    stats: 'Ãœbersicht',
    projectMemories: 'Projekt-Erinnerungen',
    globalMemories: 'Globale Erinnerungen',
    sessionStatus: 'Sitzungsstatus',
    tagManagement: 'Tags',
    issueTracking: 'Probleme',
    searchProject: 'Projekt-Erinnerungen suchen...',
    searchGlobal: 'Globale Erinnerungen suchen...',
    searchTag: 'Tags suchen...',
    status: { pending: 'Ausstehend', in_progress: 'In Bearbeitung', completed: 'Abgeschlossen', archived: 'Archiviert' },
    allStatus: 'Alle Status',
    memories: 'Erinnerungen',
    issues: 'Probleme',
    tags: 'Tags',
    total: 'Gesamt',
    items: 'EintrÃ¤ge',
    page: 'Seite',
    noMemories: 'Keine Erinnerungen',
    noStatus: 'Kein Sitzungsstatus',
    noIssues: 'Keine Probleme',
    noTags: 'Keine Tags',
    edit: 'Bearbeiten',
    delete: 'LÃ¶schen',
    rename: 'Umbenennen',
    view: 'Ansehen',
    save: 'Speichern',
    cancel: 'Abbrechen',
    confirm: 'BestÃ¤tigen',
    confirmDelete: 'LÃ¶schen bestÃ¤tigen?',
    editMemory: 'Erinnerung Bearbeiten',
    content: 'Inhalt',
    tagsCommaSep: 'Tags (kommagetrennt)',
    renameTag: 'Tag Umbenennen',
    currentName: 'Aktueller Name',
    newName: 'Neuer Name',
    mergeTags: 'Tags ZusammenfÃ¼hren',
    mergeFollowing: 'Folgende Tags zusammenfÃ¼hren',
    mergeInto: 'ZusammenfÃ¼hren zu',
    confirmDeleteTag: 'Tags lÃ¶schen: {names}?\nTags werden aus allen verknÃ¼pften Erinnerungen entfernt.',
    selected: 'AusgewÃ¤hlt',
    tagsUnit: 'Tags',
    batchMerge: 'ZusammenfÃ¼hren...',
    batchDelete: 'Stapel LÃ¶schen',
    cancelSelect: 'AbwÃ¤hlen',
    tagName: 'Tag-Name',
    memoryCount: 'Anzahl',
    actions: 'Aktionen',
    blocked: 'Blockiert',
    currentTask: 'Aktuelle Aufgabe',
    nextStep: 'NÃ¤chster Schritt',
    updateTime: 'Aktualisiert',
    progress: 'Fortschritt',
    recentChanges: 'Letzte Ã„nderungen',
    pending: 'Ausstehend',
    yes: 'Ja',
    no: 'Keine',
    clickExpand: 'Klicken zum Erweitern',
    archivedAt: 'Archiviert am',
    createdAt: 'Erstellt am',
    vectorNetwork: 'Erinnerungs-Vektornetzwerk',
    vectorSub: 'Semantik Â· 3D-Topologie Â· Maus drehen Â· {n} Knoten',
    showMore: 'Mehr Anzeigen',
    allTags: 'Alle Tags ({n})',
    tagLabel: 'Tag: {name}',
    issueList: 'Problemliste',
    projects: 'Projekte',
    footer: '~/.aivectormemory/memory.db Â· {n} Projekte',
  },
  'fr': {
    selectProject: 'SÃ©lectionner un Projet',
    stats: 'AperÃ§u',
    projectMemories: 'MÃ©moires du Projet',
    globalMemories: 'MÃ©moires Globales',
    sessionStatus: 'Ã‰tat de Session',
    tagManagement: 'Ã‰tiquettes',
    issueTracking: 'ProblÃ¨mes',
    searchProject: 'Rechercher mÃ©moires du projet...',
    searchGlobal: 'Rechercher mÃ©moires globales...',
    searchTag: 'Rechercher Ã©tiquettes...',
    status: { pending: 'En Attente', in_progress: 'En Cours', completed: 'TerminÃ©', archived: 'ArchivÃ©' },
    allStatus: 'Tous les Statuts',
    memories: 'MÃ©moires',
    issues: 'ProblÃ¨mes',
    tags: 'Ã‰tiquettes',
    total: 'Total',
    items: 'Ã©lÃ©ments',
    page: 'page',
    noMemories: 'Aucune mÃ©moire',
    noStatus: 'Aucun Ã©tat de session',
    noIssues: 'Aucun problÃ¨me',
    noTags: 'Aucune Ã©tiquette',
    edit: 'Modifier',
    delete: 'Supprimer',
    rename: 'Renommer',
    view: 'Voir',
    save: 'Enregistrer',
    cancel: 'Annuler',
    confirm: 'Confirmer',
    confirmDelete: 'Confirmer la suppression ?',
    editMemory: 'Modifier la MÃ©moire',
    content: 'Contenu',
    tagsCommaSep: 'Ã‰tiquettes (sÃ©parÃ©es par des virgules)',
    renameTag: 'Renommer l\'Ã‰tiquette',
    currentName: 'Nom Actuel',
    newName: 'Nouveau Nom',
    mergeTags: 'Fusionner les Ã‰tiquettes',
    mergeFollowing: 'Fusionner les Ã©tiquettes suivantes',
    mergeInto: 'Fusionner en',
    confirmDeleteTag: 'Supprimer les Ã©tiquettes : {names} ?\nElles seront retirÃ©es de toutes les mÃ©moires associÃ©es.',
    selected: 'SÃ©lectionnÃ©s',
    tagsUnit: 'Ã©tiquettes',
    batchMerge: 'Fusionner en...',
    batchDelete: 'Suppression GroupÃ©e',
    cancelSelect: 'DÃ©sÃ©lectionner',
    tagName: 'Nom',
    memoryCount: 'Nombre',
    actions: 'Actions',
    blocked: 'BloquÃ©',
    currentTask: 'TÃ¢che Actuelle',
    nextStep: 'Prochaine Ã‰tape',
    updateTime: 'Mis Ã  jour',
    progress: 'Progression',
    recentChanges: 'Modifications RÃ©centes',
    pending: 'En Attente',
    yes: 'Oui',
    no: 'Aucun',
    clickExpand: 'Cliquer pour dÃ©velopper',
    archivedAt: 'ArchivÃ© le',
    createdAt: 'CrÃ©Ã© le',
    vectorNetwork: 'RÃ©seau de Vecteurs MÃ©moire',
    vectorSub: 'SÃ©mantique Â· Topologie 3D Â· Rotation souris Â· {n} nÅ“uds',
    showMore: 'Voir Plus',
    allTags: 'Toutes les Ã‰tiquettes ({n})',
    tagLabel: 'Ã‰tiquette : {name}',
    issueList: 'Liste des ProblÃ¨mes',
    projects: 'projets',
    footer: '~/.aivectormemory/memory.db Â· {n} projets',
  },
  'ja': {
    selectProject: 'ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé¸æŠž',
    stats: 'çµ±è¨ˆæ¦‚è¦',
    projectMemories: 'ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨˜æ†¶',
    globalMemories: 'ã‚°ãƒ­ãƒ¼ãƒãƒ«è¨˜æ†¶',
    sessionStatus: 'ã‚»ãƒƒã‚·ãƒ§ãƒ³çŠ¶æ…‹',
    tagManagement: 'ã‚¿ã‚°ç®¡ç†',
    issueTracking: 'å•é¡Œè¿½è·¡',
    searchProject: 'ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨˜æ†¶ã‚’æ¤œç´¢...',
    searchGlobal: 'ã‚°ãƒ­ãƒ¼ãƒãƒ«è¨˜æ†¶ã‚’æ¤œç´¢...',
    searchTag: 'ã‚¿ã‚°ã‚’æ¤œç´¢...',
    status: { pending: 'æœªå‡¦ç†', in_progress: 'é€²è¡Œä¸­', completed: 'å®Œäº†', archived: 'ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–æ¸ˆ' },
    allStatus: 'ã™ã¹ã¦ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹',
    memories: 'è¨˜æ†¶',
    issues: 'å•é¡Œ',
    tags: 'ã‚¿ã‚°',
    total: 'åˆè¨ˆ',
    items: 'ä»¶',
    page: 'ãƒšãƒ¼ã‚¸',
    noMemories: 'è¨˜æ†¶ãŒã‚ã‚Šã¾ã›ã‚“',
    noStatus: 'ã‚»ãƒƒã‚·ãƒ§ãƒ³çŠ¶æ…‹ãŒã‚ã‚Šã¾ã›ã‚“',
    noIssues: 'å•é¡ŒãŒã‚ã‚Šã¾ã›ã‚“',
    noTags: 'ã‚¿ã‚°ãŒã‚ã‚Šã¾ã›ã‚“',
    edit: 'ç·¨é›†',
    delete: 'å‰Šé™¤',
    rename: 'åå‰å¤‰æ›´',
    view: 'è¡¨ç¤º',
    save: 'ä¿å­˜',
    cancel: 'ã‚­ãƒ£ãƒ³ã‚»ãƒ«',
    confirm: 'ç¢ºèª',
    confirmDelete: 'å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ',
    editMemory: 'è¨˜æ†¶ã‚’ç·¨é›†',
    content: 'å†…å®¹',
    tagsCommaSep: 'ã‚¿ã‚°ï¼ˆã‚«ãƒ³ãƒžåŒºåˆ‡ã‚Šï¼‰',
    renameTag: 'ã‚¿ã‚°åå¤‰æ›´',
    currentName: 'ç¾åœ¨ã®åå‰',
    newName: 'æ–°ã—ã„åå‰',
    mergeTags: 'ã‚¿ã‚°ã‚’çµ±åˆ',
    mergeFollowing: 'ä»¥ä¸‹ã®ã‚¿ã‚°ã‚’çµ±åˆ',
    mergeInto: 'çµ±åˆå…ˆ',
    confirmDeleteTag: 'ã‚¿ã‚°ã‚’å‰Šé™¤ï¼š{names}ï¼Ÿ\nã™ã¹ã¦ã®é–¢é€£è¨˜æ†¶ã‹ã‚‰ã‚¿ã‚°ãŒå‰Šé™¤ã•ã‚Œã¾ã™ã€‚',
    selected: 'é¸æŠžæ¸ˆ',
    tagsUnit: 'ã‚¿ã‚°',
    batchMerge: 'çµ±åˆå…ˆ...',
    batchDelete: 'ä¸€æ‹¬å‰Šé™¤',
    cancelSelect: 'é¸æŠžè§£é™¤',
    tagName: 'ã‚¿ã‚°å',
    memoryCount: 'è¨˜æ†¶æ•°',
    actions: 'æ“ä½œ',
    blocked: 'ãƒ–ãƒ­ãƒƒã‚¯çŠ¶æ…‹',
    currentTask: 'ç¾åœ¨ã®ã‚¿ã‚¹ã‚¯',
    nextStep: 'æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—',
    updateTime: 'æ›´æ–°æ—¥æ™‚',
    progress: 'é€²æ—',
    recentChanges: 'æœ€è¿‘ã®å¤‰æ›´',
    pending: 'æœªå‡¦ç†',
    yes: 'ã¯ã„',
    no: 'ãªã—',
    clickExpand: 'ã‚¯ãƒªãƒƒã‚¯ã§å±•é–‹',
    archivedAt: 'ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–æ—¥',
    createdAt: 'ä½œæˆæ—¥',
    vectorNetwork: 'è¨˜æ†¶ãƒ™ã‚¯ãƒˆãƒ«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯',
    vectorSub: 'æ„å‘³é–¢é€£ Â· 3Dãƒˆãƒãƒ­ã‚¸ãƒ¼ Â· ãƒžã‚¦ã‚¹å›žè»¢ Â· {n} ãƒŽãƒ¼ãƒ‰',
    showMore: 'ã‚‚ã£ã¨è¦‹ã‚‹',
    allTags: 'ã™ã¹ã¦ã®ã‚¿ã‚°ï¼ˆ{n}ï¼‰',
    tagLabel: 'ã‚¿ã‚°ï¼š{name}',
    issueList: 'å•é¡Œä¸€è¦§',
    projects: 'ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ',
    footer: '~/.aivectormemory/memory.db Â· {n} ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ',
  },
};

let currentLang = localStorage.getItem('avm-lang') || 'zh-CN';

function t(key) {
  const lang = messages[currentLang] || messages['zh-CN'];
  return key.split('.').reduce((o, k) => o?.[k], lang) ?? key;
}

function setLang(lang) {
  if (!messages[lang]) return;
  currentLang = lang;
  localStorage.setItem('avm-lang', lang);
  document.documentElement.lang = lang.startsWith('zh') ? (lang === 'zh-TW' ? 'zh-Hant' : 'zh-Hans') : lang;
  document.querySelectorAll('[data-i18n]').forEach(el => {
    const val = t(el.dataset.i18n);
    if (el.tagName === 'OPTION') el.textContent = val;
    else if (el.childElementCount === 0) el.textContent = val;
    else {
      const textNodes = [...el.childNodes].filter(n => n.nodeType === 3);
      if (textNodes.length) textNodes[0].textContent = val;
      else el.textContent = val;
    }
  });
  document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
    el.placeholder = t(el.dataset.i18nPlaceholder);
  });
  const langSelects = document.querySelectorAll('.lang-select');
  langSelects.forEach(s => s.value = lang);
}

function renderLangSwitcher(containerId) {
  const el = document.getElementById(containerId);
  if (!el) return;
  const options = Object.entries(LANGS).map(([code, { flag, label }]) =>
    `<option value="${code}"${code === currentLang ? ' selected' : ''}>${flag} ${label}</option>`
  ).join('');
  el.innerHTML = `<select class="lang-select">${options}</select>`;
  el.querySelector('.lang-select').addEventListener('change', (e) => {
    setLang(e.target.value);
    if (typeof window._reloadCurrentView === 'function') window._reloadCurrentView();
  });
}